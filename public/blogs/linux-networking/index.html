<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Liste - https://marvin.dev/"><title>Understanding Linux Networking: Insights from Performance Observability Tools | Marvin Murithi | Site Reliability Engineer</title>
<meta name=description content="Linux networking from an observability pov."><meta property="og:title" content="Understanding Linux Networking: Insights from Performance Observability Tools"><meta property="og:description" content="Linux networking from an observability pov."><meta property="og:type" content="article"><meta property="og:url" content="https://marvin.dev/blogs/linux-networking/"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2024-09-08T09:45:00+00:00"><meta property="article:modified_time" content="2024-09-08T09:45:00+00:00"><meta itemprop=name content="Understanding Linux Networking: Insights from Performance Observability Tools"><meta itemprop=description content="Linux networking from an observability pov."><meta itemprop=datePublished content="2024-09-08T09:45:00+00:00"><meta itemprop=dateModified content="2024-09-08T09:45:00+00:00"><meta itemprop=wordCount content="830"><meta itemprop=keywords content="Monitoring,Linux network stack,Observability,"><link rel=canonical href=https://marvin.dev/blogs/linux-networking/><link rel=icon href=https://marvin.dev//assets/favicon.ico><link rel=dns-prefetch href=https://www.google-analytics.com><link href=https://www.google-analytics.com rel=preconnect crossorigin><link rel=alternate type=application/atom+xml title="Marvin Murithi | Site Reliability Engineer" href=https://marvin.dev//atom.xml><link rel=alternate type=application/json title="Marvin Murithi | Site Reliability Engineer" href=https://marvin.dev//feed.json><link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:2rem;background:#f5f5f5;color:#000}.skip-link{position:absolute;top:-40px;left:0;background:#eee;z-index:100}.skip-link:focus{top:0}header{line-height:2;padding-bottom:1.5rem}.link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.time{font-variant-numeric:tabular-nums;white-space:nowrap}blockquote{border-left:5px solid #eee;padding-left:1rem;margin:0}a,a:visited{color:inherit}a:hover,a.heading-link{text-decoration:none}pre{padding:.5rem;overflow:auto;overflow-x:scroll;overflow-wrap:normal}code,pre{font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;font-size:small;background:#eee}code{margin:.1rem;border:none}ul{list-style-type:square}ul,ol{padding-left:1.2rem}.list{line-height:2;list-style-type:none;padding-left:0}.list li{padding-bottom:.1rem}.meta{color:#777}.content{max-width:70ch;margin:0 auto}header{line-height:2;display:flex;justify-content:space-between;padding-bottom:1rem}header a{text-decoration:none}header ul{list-style-type:none;padding:0}header li,header a{display:inline}h2.post{padding-top:.5rem}header ul a:first-child{padding-left:1rem}.nav{height:1px;background:#000;content:'';max-width:10%}.list li{display:flex;align-items:baseline}.list li time{flex:initial}.hr-list{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:0;border-bottom:1px dotted #ccc;flex:1 0 1rem}.m,hr{border:0;margin:3rem 0}img{max-width:100%;height:auto}.post-date{margin:5% 0}.index-date{color:#9a9a9a}.animate-blink{animation:opacity 1s infinite;opacity:1}@keyframes opacity{0%{opacity:1}50%{opacity:.5}100%{opacity:0}}.tags{display:flex;justify-content:space-between}.tags ul{padding:0;margin:0}.tags li{display:inline}.avatar{height:120px;width:120px;position:relative;margin:-10px 0 0 15px;float:right;border-radius:50%}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;text-align:left;padding:8px}th{background-color:#f2f2f2}</style><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"blogs","name":"Understanding Linux Networking: Insights from Performance Observability Tools","headline":"Understanding Linux Networking: Insights from Performance Observability Tools","alternativeHeadline":"","description":"Linux networking from an observability pov.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/marvin.dev\/blogs\/linux-networking\/"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"Marvin Murithi | Site Reliability Engineer","copyrightYear":"2024","dateCreated":"2024-09-08T09:45:00.00Z","datePublished":"2024-09-08T09:45:00.00Z","dateModified":"2024-09-08T09:45:00.00Z","publisher":{"@type":"Organization","name":"Marvin Murithi | Site Reliability Engineer","url":"https://marvin.dev/","logo":{"@type":"ImageObject","url":"https:\/\/marvin.dev\/assets\/favicon.ico","width":"32","height":"32"}},"image":"https://marvin.dev/assets/favicon.ico","url":"https:\/\/marvin.dev\/blogs\/linux-networking\/","wordCount":"830","genre":["Monitoring","Linux network stack","Observability"],"keywords":["Monitoring","Linux network stack","Observability"]}</script></head><body><a class=skip-link href=#main>Skip to main</a><main id=main><div class=content><header><p style=padding:0;margin:0><a href=../../><b>Marvin Murithi | Site Reliability Engineer</b>
<span class="text-stone-500 animate-blink">▮</span></a></p><ul style=padding:0;margin:0><li><a href=../../><span>Home</span></a><li><a href=../../portfolio/><span>Portfolio</span></a><li><a href=../../blogs/><span>Blogs</span></a><li><a href=../../papershelf/><span>Papershelf</span></a></li></ul></header><hr class=hr-list style=padding:0;margin:0><section><h2 class=post>Understanding Linux Networking: Insights from Performance Observability Tools</h2><p>Linux is a powerful operating system, and its networking capabilities are core to running server applications, hosting services and ensuring reliable communication. Observability within the Linux networking domain is vital for troubleshooting, performance optimization and system monitoring. This post explores the essential tools available for Linux networking through the lens of the observability tools framework.</p><h3 id=layers-of-linux-networking>Layers of Linux Networking</h3><p>Linux networking is complex, involving multiple layers in the OS stack. From user applications to device drivers, each layer has specific tools that allow you to monitor, trace and optimize performance.</p><ol><li><strong>Application layer:</strong> This layer represents the running applications that depend on the network. Tools like <code>strace</code>, <code>ltrace</code>, and <code>opensnoop</code> can help monitor system calls and library calls from the applications interacting with the network.</li><li><strong>System Call Interface (SCI):</strong> When applications need to communicate with lower layers, they rely on system calls. Tools like <code>perf</code>, <code>Ftrace</code>, and <code>bpftrace</code> help track these calls, offering insights into bottlenecks or latency issues.</li><li><strong>VFS and File Systems:</strong> The Virtual File System (VFS) and specific file systems like ext4 or btrfs impact networking when files are served over the network (e.g., NFS, Samba). <code>ext4dist</code>, <code>iostat</code>, and <code>biosnoop</code> are tools that help in measuring I/O performance, which is indirectly tied to network speed when files are shared.</li><li><strong>Sockets and TCP/UDP:</strong> These are the core of networking in Linux. Tools like <code>ss</code>, <code>nstat</code>, <code>tcpdump</code>, and <code>tcplife</code> help you monitor socket usage, connection status, and packet transfer between systems. For example, <code>tcpdump</code> is invaluable for packet inspection at the interface level, while <code>ss</code> provides a snapshot of all socket connections.</li><li><strong>IP and Network Devices:</strong> This layer is where IP addressing, routing, and interface communication occur. The <code>ip</code> command is versatile for configuring IP addresses, while netstat shows network statistics. For detailed per-port network traffic, tools like <code>nicstat</code> and <code>ethtool</code> provide hardware-level insights into network interfaces.</li><li><strong>Scheduler and Virtual Memory:</strong> The interaction between scheduling, memory management, and networking is critical, especially when packets need to be queued or data is cached. Tools like <code>vmstat</code> and <code>slabtop</code> help monitor memory and cache usage, which can impact network performance.</li><li><strong>Device Drivers:</strong> The network controller hardware interacts with device drivers, which convert data between software and physical layers. <code>ethtool</code>, <code>lldptool</code>, and <code>snmpget</code> are used for monitoring network ports and configuring hardware settings.</li></ol><h3 id=exploring-key-linux-networking-tools>Exploring Key Linux Networking Tools</h3><p>Let’s delve deeper into some of these essential tools for understanding Linux networking performance:</p><ul><li><p><code>tcpdump</code>: This powerful packet analyzer captures network packets on an interface, making it ideal for troubleshooting issues at the packet level. For example, it can help identify packet loss, malformed packets, or unusual traffic patterns.</p></li><li><p><code>ethtool</code>: This tool provides detailed information about the capabilities and status of network interfaces. It can show whether the interface is running in full or half-duplex mode and the negotiated speed. This is crucial for diagnosing issues with slow or unstable connections.</p></li><li><p><code>ss</code> and <code>netstat</code>: These tools provide details on socket statistics and network connections. ss is a more modern alternative to netstat, giving faster results and more detailed socket information like TCP congestion state.</p></li><li><p><code>ip</code>: The ip command is a versatile tool for configuring and monitoring networking in Linux. You can use it to manage routes, addresses, and interfaces, making it fundamental for any network administration.</p></li><li><p><code>nstat</code>: This tool provides network statistics, including TCP, UDP, and ICMP metrics. It’s helpful when you want to identify trends in network communication, like retransmissions, packet errors, or congestion.</p></li></ul><h3 id=hardware-and-network-performance>Hardware and Network Performance</h3><p>Linux networking doesn’t end at the software level; hardware plays a crucial role too. For deeper insights, tools like <code>nicstat</code>, <code>mpstat</code>, and <code>turbostat</code> are used to monitor hardware performance in real-time.</p><ul><li><p><code>nicstat</code>: Measures network interface card (NIC) usage, offering metrics on throughput, packet transmission rates, and errors.</p></li><li><p><code>mpstat</code>: This monitors CPU usage per processor, which can be tied to networking if CPUs are overloaded handling network interrupts (e.g., from high packet rates).</p></li><li><p><code>turbostat</code>: This is designed for monitoring CPU and power usage, offering insight into how hardware performance impacts networking.</p></li></ul><h3 id=tying-it-all-together>Tying It All Together</h3><p>The observability tools in Linux provide a comprehensive way to analyze the network performance of your system. Whether you’re monitoring packet flow, socket states, or hardware interfaces, each tool helps identify where networking bottlenecks might exist.</p><p>Understanding how to use these tools effectively requires a systematic approach:</p><ul><li><p>Begin with higher-level tools like <code>ss</code> and <code>netstat</code> to assess the overall health of the network.</p></li><li><p>Drill down using <code>tcpdump</code> or <code>ethtool</code> when specific problems arise.</p></li><li><p>Use hardware monitoring tools like <code>mpstat</code> and <code>nicstat</code> to ensure that the underlying hardware is not causing performance degradation.</p></li></ul><p>By combining these tools, you’ll be able to pinpoint issues and optimize the network stack for better performance.</p><h3 id=conclusion>Conclusion</h3><p>Networking in Linux is a vast field, but understanding performance observability tools provides you with the critical insights you need to keep your systems running smoothly. From packet capture with <code>tcpdump</code> to hardware performance monitoring with <code>ethtool</code> and <code>turbostat</code>, these tools offer a well-rounded suite for diagnosing, troubleshooting, and optimizing network performance.</p><div class=post-date><span class="g time">September 8, 2024 </span>&#8729;
<a href=https://marvin.dev/tags/monitoring/>monitoring</a> <a href=https://marvin.dev/tags/linux-network-stack/>linux-network-stack</a> <a href=https://marvin.dev/tags/observability/>observability</a></div></section></div></main></body></html>